<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Akun Pengguna</title>

    <link rel="stylesheet" href="/public/css/admin.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@1.15.0/dist/full.css" rel="stylesheet">
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div class="utama">
        <div class="sidebar">
            <!-- memanggil sidebar  -->
            <%- include('../template/sidebarAdmin.ejs') %>
        </div>
        
        <div class="konten-utama">
            <div class="profil">
                <!-- logo profil -->
                <%- include('../template/profil.ejs') %>
            </div>

            <!-- isi -->
            <div class="judul">
                Daftar Akun Pengguna
                <div class="tombol">
                    <a href="/admin/data-akun/tambah-akun" class="btn btn-primary" id="tombol-tambah" type="submit">+ Tambah Pengguna</a>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="table w-11/12 ml-12" >
                  <!-- head -->
                    <thead>
                      <tr>
                        <th id="hi">No</th>
                        <th id="hi">NIM/NIDN</th>
                        <th id="hi">Nama</th>
                        <th id="hi">Role</th>
                        <th id="hi">Aksi</th>
                      </tr>
                    </thead>

                    <tbody>
                        <!-- row 1 -->
                        <% let no = 1; %> 
                        <% allUser.forEach(user => { %>
                        <tr>
                              <th id="ha"><%= no++ %></th>
                              <td id="ha"><%= user.nomor_induk %></td>
                              <td id="ha"><%= user.name %></td>
                              <td id="ha"><%= user.role %></td>
                              <td id="ha" class="aksi">
                                <a href="/admin/data-akun/lihat-akun/<%= user.id_user %>">
                                    <img
                                  src="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-ios7-eye-512.png"
                                  alt="lihat" id="ikon-aksi">
                                </a>
                            
                                <a href="/admin/data-akun/edit-akun/<%= user.id_user %>">
                                  <img
                                  src="https://cdn1.iconfinder.com/data/icons/general-ui-outlined-thick/24/edit-512.png"
                                  alt="edit" id="ikon-aksi">
                                </a>
                            
                                <a onclick="confirmDelete(<%= user.id_user %>)">
                                  <img
                                  src="https://cdn2.iconfinder.com/data/icons/squircle-ui/32/Trash-512.png"
                                  alt="hapus" id="ikon-aksi">
                                </a>
                              </td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>

        </div>
        
    </div>
    

    <script>
        function confirmDelete(userId) {
            if (confirm('Apakah Anda yakin ingin menghapus akun ini?')) {
                window.location.href = `/admin/data-akun/hapus-akun/${userId}`;
            }
        }
    </script>

</body>
</html>